<!DOCTYPE html>
<html>
<head>
    <title>Vue.js</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

</head>
<body>
    <div id="app" class="container">
        <p>Todo App</p>
        <input v-model="message">
        <button v-on:click="addTodo(message)" class="btn">Add Todo</button>
        <ul>
            <li v-for="todo in todos" v-show="!isEditing" class="card card-body" style="width: 18rem; margin-top: 1em">
                <p class="card-title">{{ todo.text }}</p>
                <button v-for="status in priorities" v-on:click="changePriority(status, todo)">{{ status }}</button>
                <div>
                    <button v-on:click="deleteTodo(todo)" class="btn" style="margin-top: 1em">Delete</button>
                    <button v-on:click="editTodo()" class="btn" style="margin-top: 1em">Edit</button>
                    <button v-on:click="completeTodo(todo)" class="btn" style="margin-top: 1em" onclick="this.style.background='green'">Done</button>
                </div>
            </li>
            <li v-for="todo in todos" v-show="isEditing" class="card card-body" style="width: 18rem; margin-top: 1em">
                    <input v-model="todos[todos.indexOf(todo)].text">
                    <div>
                        <button v-on:click="saveTodo(todo)" class="btn">Save</button>
                    </div>
                </li>            
        </ul>
    </div>
    
    <script>
        
        var app = new Vue({
            el: '#app',
            data: {
                todos: [],
                message: '',
                isEditing: false,
                priorities: ['low', 'medium' , 'high']
            },
            methods: {
                addTodo: function (message) {
                    this.todos.push({ text: this.message, priority: 'medium', done: false });
                    this.message = '';
                },
                deleteTodo: function (todo) {
                    this.todos.splice(this.todos.indexOf(todo), 1);
                },
                editTodo: function () {
                    this.isEditing = true;
                },
                saveTodo: function (todo) {
                    this.isEditing = false;
                    this.todos[this.todos.indexOf(todo)] = todo;
                },
                changePriority: function(status, todo) {
                    this.todos[this.todos.indexOf(todo)].priority = status;
                },
                completeTodo(todo) {
                    this.todos[this.todos.indexOf(todo)].done = true;
                },
            }
        })    
    </script>
    
    
</body>
</html>